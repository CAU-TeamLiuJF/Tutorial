# 1. VS Code

## 1.1 简介

**Visual Studio Code（简称VS Code）**是一款**轻便**但功能强大的**源代码编辑器**，可以在你的电脑上运行，并且支持**Windows**、**macOS**和**Linux**操作系统。它内置了对JavaScript、TypeScript和Node.js的支持，并且有丰富的**扩展插件**，适用于其他编程语言和运行环境（如**R**、**C/C++**、C#、Java、**Python**、PHP、Go、.NET等）。

## 1.2 优势及不足

### 1.2.1 优势

- **开源免费**：与整个社区深入合作，**倾听**用户在 GitHub 上的**反馈**，使 VS Code越做越好。
- **跨平台支持**：支持**Windows**、**macOS**和**Linux**操作系统，允许开发者在不同的平台上使用相同的工具，提高了**跨平台开发**的便利性。
- **轻量级但强大**：轻量级源代码编辑器，**启动迅速**，占用较少系统资源，但功能强大，包括智能代码提示、调试支持、Git集成等。
- **丰富的扩展**：拥有庞大的**扩展市场**，用户可以根据自己的需求安装插件和扩展，涵盖了各种编程语言和工具。
- **内置支持**：内置了对**多种编程语言**的支持，如JavaScript、TypeScript和Node.js，无需额外的配置即可基于这些语言进行开发。
- **集成的调试器**：内置**调试器**使得识别和修复问题变得更加容易，提高了开发效率。
- **版本控制支持**：与版本控制系统（如Git）**深度集成**，使团队协作和源代码管理更加顺畅。
- **高度可定制**：允许用户**高度自定义**其界面和功能，包括**主题**、**键盘快捷键**和代码片段等。

### 1.2.2 不足

- **功能限制**：可能不如一些其他**集成开发环境**（IDE）如**RStudio**或**Visual Studio**功能丰富。
- **界面和自定义性**：一些用户可能会觉得软件界面不够直观，或者与**其他IDE**相比，**可自定义性**不够强大。
- **不适用于某些开发类型**：对于某些特定类型的开发，如移动**应用程序**开发或**游戏开发**，VS Code可能不如其他工具更适用。
- **性能问题**：在处理**大型**代码库或**项目**时可能会遇到性能问题，可能会导致编辑和操作速度变慢。
- **部分功能需要插件**：某些功能可能不包含在**基础版本**中，需要安装**额外插件**才能使用。

## 1.3 安装

- **下载安装程序**：在[Visual Studio Code官网](https://code.visualstudio.com/)点击**Download for Windows**后自动开始下载当前最新的**稳定版本**。

  ![vscode官网](/VSCode/image/vscode官网.png)

- **运行安装程序**：**双击**下载的安装程序（如：VSCodeUserSetup-x64-1.82.2.exe）进入**安装引导**。若出现"**当前无法访问>SmartScreen**"的弹窗，是因为一些特殊原因无法访问**Windows Defender SmartScreen**，如无网络连接等，导致Windows无法判断该安装的**安全性**。所以弹出提示窗口让用户**手动判断**是否运行该应用。由于该软件安装包我们是从官网下载的，可以保证其安全性，所以我们点击**运行**即可。**注意**：若此时系统中已有**VS Code正在运行**，则会提示用户先退出VS Code软件。

  ![运行安装程序](/VSCode/image/运行安装程序.png)

- **选择目标位置**：可以自定义软件的**安装位置**，但需要注意的是，当目前计算机上没有安装VS Code时才会出现此窗口，若检测到**已经安装**了该软件，则会**默认**安装到**现有**VS Code的安装**路径**，类似于**升级**该软件，此时不会出现此窗口而是直接进入到下一步。

![自定义安装路径](/VSCode/image/自定义安装路径.PNG)

- **许可协议**：软件许可协议，点选**我同意此协议**，然后点击**下一步**。

  ![许可协议](/VSCode/image/许可协议.png)

- **选择附加任务**：选择需要程序在安装过程中需要执行的**额外任务**，这里建议取消勾**选将Code注册为受支持的文件类型的编辑器**，其其他选项都勾选上。

  ![附加任务](/VSCode/image/附加任务.png)

  - **将“通过code打开”操作添加到Windows资源管理器文件（目录）上下文菜单**：若勾选这两个选项，在Windows的资源管理器中选中某个文件（夹）时并按鼠标右键，可以看到"**通过code打开**"这个选项。
  - **将code注册为受支持的文件类型的编辑器**：默认使用VS Code打开诸如**.txt**，**.py**等文本类型的文件，一般建议**不勾选**
  - **添加到PATH（重启后生效）**：建议勾选，这样可以使用**控制台**（如Windows的**cmd**）打开VS Code 了

- **准备安装**：列出用户自定义的一些可选择选项以供用户核对。根据计算机上**是否已安装**VS Code软件，会有以下两种不同界面。确认信息无误后点击**安装**即正式进入安装环节。

![准备安装](/VSCode/image/准备安装.png)

- **安装完成**：点击“**完成**”即可，用户还可以选择是否**立即运行**刚刚安装的VS Code软件。

![安装完成](/VSCode/image/安装完成.PNG)

- **运行已安装好的VS Code**：运行VS Code后需要注意**右下角**的**提示信息**，里面有软件给出的**建议**等。

![运行界面](/VSCode/image/运行界面.PNG)

# 2. 连接到远程计算机

**VS Code**可以通过**SSH**或**隧道**等方式连接到远程计算机，我们这里只介绍**SSH连接**这一种方式。

## 2.1 VS Code Server

**VS Code Server**是一个可以在**远程机器（计算机）**上运行的服务 ，VS Code的**远程开发扩展**让你在 Windows Subsystem for Linux（**WSL**）、通过 **SSH** 远程访问的远程机器以及直接从 VS Code 中的开发容器中工作。这些扩展在远程环境上安装了一个服务器（**server**），允许本地的 VS Code 与远程源代码和运行时**无缝交互**。进行远程服务器连接前需要在VS Code中安装**remote - SSH**、**remote - Tunnels**或**WSL**等**插件**。

![VScodeSever](/VSCode/image/VScodeSever.png)

**VS Code Server**的应用场景有：

- 在SSH支持可能**受到限制**的远程计算机上开发，或需要基于**web**的访问。

- 在**不支持安装VS Code**桌面的机器上开发，如**平板电脑**或Chromebook（网络笔记本）。

- 体验所有代码都在**浏览器沙箱**中执行的客户端**安全优势**。

## 2.2 VS Code Server安装

**VS Code Server**是远程开发扩展的一个**组件**，由**VS Code**客户端**管理**。当它连接到终端时，它会由VS Code**自动安装**和**更新**，如果单独安装，可能会很快**过时**。

### 2.2.1 在线安装

- **插件安装**：通过SSH连接到远程计算机需要**第三方插件**的支持，所以我们需要在VS code中安装**remote - SSH**插件。

![安装remote插件](/VSCode/image/安装remote插件.png)

- **打开远程窗口**：点击界面左下角的**><**图标，即**连接到主机**按钮。

![打开远程窗口按钮](/VSCode/image/打开远程窗口按钮.png)

- **选择连接方式**：选择选项中的**连接到主机... remote - SSH**。

![连接到主机](/VSCode/image/连接到主机.png)

- **指定主机位置**：当**VS Code**中没有已配置好的主机，或需要连接新的主机时，直接输入**主机地址**（**用户名@ip地址**）或选择**配置 SSH 主机**，通过编辑**配置文件**以指定主机位置。

![输入主机地址](/VSCode/image/输入主机地址.png)

- **选择系统**：选择远程计算机的**操作系统**（通常为**Linux**）。

![选择主机系统](/VSCode/image/选择主机系统.png)

- **确认指纹**：若是**首次连接**到该远程计算机，**VS Code**会**提示**远程计算机的Key信息，点击继续即可。

![确认远程主机指纹](/VSCode/image/确认远程主机指纹.png)

- **用户验证**：输入**登陆账户**在远程计算机登陆需要的**密码**（密钥）信息。

![主机密码](/VSCode/image/主机密码.png)

- **设置主机**：若VS Code检测到远程计算机**没有安装**与其**版本匹配**的**VS Code Server**，则会**自动下载**。下载通常有两种情况，若远程计算机已连接网络，则会在**远程**主机上下载；若是远程计算机没有网络条件，则会在**本地**计算机下载**VS Code Server**，然后通过scp**复制到远程主机**进行解压部署。

![设置主机2](/VSCode/image/设置主机2.png)

- **成功连接**：**VS Code Server**正常安装后**VS Code**则能成功连接到远程计算机，此时我们则可以在**VS Code**中与远程计算机进行**文件**和**命令**的交互。

![成功连接远程服务器](/VSCode/image/成功连接远程服务器.png)

### 2.2.2 离线安装

#### 2.2.2.1 从其他远程主机复制

若是我们有**多个远程主机**，而其中一些远程主机上已经安装与**VS Code**匹配的**最新版本**的**VS Code Server**，我们可以相应的文件直接打包复制到需要安装**VS Code Server**的远程主机，而不需要**VS Code**连接后再自动下载安装。

- **VS code版本**：在**VS Code**界面的顶部工具栏最右侧找到”**帮助**“选项，然后点击弹出菜单栏中的**关于**。

![VSCode关于](/VSCode/image/VSCode关于.png)

- **版本id**：**VS Code Server**与**VS Code**都是一一对应的关系，所以我们找到版本信息界面后复制**版本id**（commit id）。

![VSCode-summit-id](/VSCode/image/VSCode-summit-id.png)

- **VS Code Server版本**：查看远程（Linux）计算机上是否已安装与**VS Code**客户端**版本**相匹配的**VS Code Server**。

```shell
## 首先确认远程服务器上已安装相应版本的VS Code Server
ls ${HOME}/.vscode-server/bin/abd2f3db4bdb28f9e95536dfa84d8479f1eb312d
```

- **打包文件夹**：将以commit id命名的**文件夹**进行**打包压缩**。

```shell
## 将以commit id命名的文件夹进行打包压缩
cd ${HOME}/.vscode-server/bin
tar -czvf abd2f3.tar.gz abd2f3db4bdb28f9e95536dfa84d8479f1eb312d 
```

- **创建文件夹**：在需要安装**VS Code Server**的远程计算机上创建需要的**bin**目录。

```shell
## 创建文件夹
mkdir -p ${HOME}/.vscode-server/bin
```

- **复制解压**：把上述压缩文件**复制**到需要安装VS Code Server的远程计算机的${HOME}/.vscode-server/bin文件夹下，然后**解压**。

```
## 在bin目录下解压文件
tar -xzvf abd2f3.tar.gz
```

- **远程连接**：按照 **2.3.1**的步骤连接到远程计算机。
- **配置**：VS Code对远程的Server进行**进一步配置**。

![手动下载](/VSCode/image/手动下载.png)

#### 2.2.2.2 下载VS Code Server源文件

- **下载源文件**：根据上面查询到的目前VS Code的版本，将链接：https://update.code.visualstudio.com/commit:**commit_id**/server-linux-x64/stable中的**commit_id**替换为当前版本的commit id（如：https://update.code.visualstudio.com/commit:abd2f3db4bdb28f9e95536dfa84d8479f1eb312d/server-linux-x64/stable），然后粘贴到**浏览器**中下载该文件。
- 按照**2.2.2.1**中的步骤将文件**复制**到需要安装**VS Code Server**的远程计算机上，**解压**后用**VS Code**连接到该远程计算机即可。
